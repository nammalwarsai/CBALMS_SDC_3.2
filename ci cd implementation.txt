Below is a **complete, fresher-appropriate CI/CD implementation** for your
**Cloud-Based Attendance & Leave Management System** using **React + Node.js + Supabase + AWS EC2 + S3**.

This setup is **interview-safe**, **industry-aligned**, and **easy to explain**.

---

# CI/CD OVERVIEW (INTERVIEW VERSION)

**Goal:**
Automatically build, test, and deploy frontend & backend whenever code is pushed to GitHub.

**Trigger:**
`git push` to `main` branch

**Pipeline Flow:**

```
Developer → GitHub → GitHub Actions
          → Build & Test
          → Deploy Backend to EC2
          → Build Frontend
          → Upload Frontend to S3 (or serve via NGINX)
```

---

# TOOLS USED (KEEP THIS LIST READY)

| Purpose         | Tool           |
| --------------- | -------------- |
| Source Control  | GitHub         |
| CI/CD Engine    | GitHub Actions |
| Backend Runtime | Node.js        |
| Frontend Build  | React          |
| Cloud Server    | AWS EC2        |
| Web Server      | NGINX          |
| Storage         | AWS S3         |
| Secrets         | GitHub Secrets |
| Auth + DB       | Supabase       |
| Process Manager | PM2            |

> **Why GitHub Actions?**
> Free for freshers, YAML-based, no extra server needed.

---

# REPOSITORY STRUCTURE (IMPORTANT)

```
attendance-system/
├── backend/
│   ├── src/
│   ├── package.json
│   └── ecosystem.config.js (PM2)
├── frontend/
│   ├── src/
│   └── package.json
├── .github/
│   └── workflows/
│       └── deploy.yml
└── README.md
```

---

# CI/CD PIPELINE – BACKEND (NODE + EXPRESS)

## Step 1: EC2 Preparation (One-Time)

On EC2:

```bash
sudo yum update -y
sudo yum install nodejs git -y
sudo npm install -g pm2
```

Clone repo once:

```bash
git clone https://github.com/your-username/attendance-system.git
```

---

## Step 2: PM2 Config (Backend)

`backend/ecosystem.config.js`

```js
module.exports = {
  apps: [{
    name: "attendance-backend",
    script: "src/index.js",
    env: {
      NODE_ENV: "production"
    }
  }]
};
```

---

## Step 3: GitHub Secrets (VERY IMPORTANT)

Add these in **GitHub → Settings → Secrets**:

| Secret Name           | Value             |
| --------------------- | ----------------- |
| EC2_HOST              | Public IP         |
| EC2_USER              | ec2-user          |
| EC2_KEY               | EC2 private key   |
| SUPABASE_URL          | Supabase URL      |
| SUPABASE_KEY          | Supabase anon key |
| AWS_ACCESS_KEY_ID     | IAM key           |
| AWS_SECRET_ACCESS_KEY | IAM secret        |
| AWS_REGION            | ap-south-1        |

---

## Step 4: Backend CI/CD Workflow

`.github/workflows/deploy.yml` (Backend Part)

```yaml
name: Deploy Backend

on:
  push:
    branches: [main]

jobs:
  backend-deploy:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4

    - name: Setup Node
      uses: actions/setup-node@v4
      with:
        node-version: 18

    - name: Install Backend Dependencies
      run: |
        cd backend
        npm install

    - name: Deploy to EC2
      uses: appleboy/ssh-action@v1
      with:
        host: ${{ secrets.EC2_HOST }}
        username: ${{ secrets.EC2_USER }}
        key: ${{ secrets.EC2_KEY }}
        script: |
          cd attendance-system/backend
          git pull origin main
          npm install
          pm2 restart ecosystem.config.js || pm2 start ecosystem.config.js
```

---

# CI/CD PIPELINE – FRONTEND (REACT)

## Option A (BEST for Freshers): S3 Static Hosting

### Step 1: Build Frontend in Pipeline

```yaml
  frontend-build:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4

    - name: Setup Node
      uses: actions/setup-node@v4
      with:
        node-version: 18

    - name: Build React App
      run: |
        cd frontend
        npm install
        npm run build
```

---

### Step 2: Deploy to S3

```yaml
    - name: Upload to S3
      uses: jakejarvis/s3-sync-action@v0.5.1
      with:
        args: --delete
      env:
        AWS_S3_BUCKET: attendance-frontend-bucket
        AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}
        AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
        AWS_REGION: ap-south-1
        SOURCE_DIR: frontend/build
```

---

# COMPLETE CI/CD FLOW (INTERVIEW ONE-LINER)

> “Whenever I push code to GitHub, GitHub Actions automatically builds the React frontend, uploads it to S3, and deploys the Node.js backend to EC2 using SSH and PM2.”

---

# SECURITY & BEST PRACTICES (INTERVIEW GOLD)

* No credentials in code
* IAM role with **S3-only access**
* Environment variables via GitHub Secrets
* Backend behind NGINX reverse proxy
* Private S3 bucket + controlled access

---

# FAILURE HANDLING (INTERVIEW QUESTION)

**Q: What if deployment fails?**

* GitHub Actions job fails
* Previous version still running on EC2
* Logs available in GitHub Actions & PM2

---

# FUTURE CI/CD IMPROVEMENTS (MENTION THIS)

* Add **test stage**
* Blue-Green deployment
* Docker-based deployment
* CloudFront CDN
* HTTPS using ACM + NGINX

---

# FINAL INTERVIEW SUMMARY (MEMORIZE)

> “I implemented CI/CD using GitHub Actions. Backend auto-deploys to EC2 with PM2, frontend builds and uploads to S3. Secrets are securely managed, and the pipeline ensures faster, error-free deployments.”

---

## Next (Optional but Powerful)

I can:

1. Add **CI/CD section to your PDF**
2. Create **interview Q&A specifically on CI/CD**
3. Provide **NGINX config**
4. Convert this to **Docker-based CI/CD**

Say **what you want next**.
